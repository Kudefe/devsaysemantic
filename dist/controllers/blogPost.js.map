{"version":3,"sources":["../../server/controllers/blogPost.js"],"names":["blogPost","get","req","res","render","post","checkBody","notEmpty","errors","validationErrors","flash","blog","title","body","createdAt","Date","toISOString","slice","title2","console","log","save","err","redirect"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,WAAW,EAAjB;;AAEAA,SAASC,GAAT,GAAe,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3BA,MAAIC,MAAJ,CAAW,UAAX;AACD,CAFD;;AAIA;;AAEAJ,SAASK,IAAT,GAAgB,UAACH,GAAD,EAAMC,GAAN,EAAc;AAC5BD,MAAII,SAAJ,CAAc,OAAd,EAAuB,YAAvB,EAAqCC,QAArC;AACAL,MAAII,SAAJ,CAAc,MAAd,EAAsB,YAAtB,EAAoCC,QAApC;;AAGA,MAAIC,SAASN,IAAIO,gBAAJ,EAAb;;AAEA,MAAID,MAAJ,EAAY;AACVL,QAAIO,KAAJ,CAAU,OAAV,EAAmB,iBAAnB;AACAP,QAAIC,MAAJ,CAAW,UAAX,EAAuB;AACrBI,cAAQA;AADa,KAAvB;AAGD,GALD,MAKO;AACLL,QAAIO,KAAJ,CAAU,SAAV,EAAqB,eAArB;;AAEA,QAAIC,OAAO,wBAAX;;AAEAA,SAAKC,KAAL,GAAaV,IAAIW,IAAJ,CAASD,KAAtB;AACAD,SAAKE,IAAL,GAAYX,IAAIW,IAAJ,CAASA,IAArB;AACAF,SAAKG,SAAL,GAAiB,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,CAA/B,EAAiC,EAAjC,CAAjB;AACAN,SAAKO,MAAL,GAAc,uBAAQP,KAAKC,KAAb,CAAd;;AAEAO,YAAQC,GAAR,CAAYT,KAAKO,MAAjB;;AAEAP,SAAKU,IAAL,CAAU,UAACC,GAAD,EAAS;AACjB,UAAIA,GAAJ,EAAS;AACP,cAAMA,GAAN;AACD,OAFD,MAEO;AACLnB,YAAIoB,QAAJ,CAAa,OAAb;AACD;AACF,KAND;AAOD;AACF,CAhCD;;kBAkCevB,Q","file":"blogPost.js","sourcesContent":["import mongoose from 'mongoose'\r\nimport Blog from './../models/blogPost'\r\nimport slugify from './slugify/slugify'\r\n\r\nconst blogPost = {}\r\n\r\nblogPost.get = (req, res) => {\r\n  res.render('add_blog')\r\n}\r\n\r\n//TODO: añadir el post al server del blog post\r\n\r\nblogPost.post = (req, res) => {\r\n  req.checkBody('title', 'Requerido!').notEmpty()\r\n  req.checkBody('body', 'Requerido!').notEmpty()\r\n \r\n\r\n  let errors = req.validationErrors()\r\n\r\n  if (errors) {\r\n    res.flash('error', 'no wn, de nuevo')\r\n    res.render('add_blog', {\r\n      errors: errors\r\n    })\r\n  } else {\r\n    res.flash('success', 'Blog añadido!')\r\n\r\n    let blog = new Blog()\r\n\r\n    blog.title = req.body.title\r\n    blog.body = req.body.body\r\n    blog.createdAt = new Date().toISOString().slice(0,10); \r\n    blog.title2 = slugify(blog.title);\r\n\r\n    console.log(blog.title2);\r\n\r\n    blog.save((err) => {\r\n      if (err) {\r\n        throw err\r\n      } else {\r\n        res.redirect('/blog')\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport default blogPost\r\n"]}